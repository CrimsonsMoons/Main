--- === GUI Library Setup ===
local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/xHeptc/Kavo-UI-Library/main/source.lua"))()
local Window = Library.CreateLib("Pilgrmageddon Automation", "DarkTheme")

-- === Tabs ===
local AutoTab = Window:NewTab("Automation")
local AutoSection = AutoTab:NewSection("Main Controls")

-- === Player / Character Setup ===
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- === Functions ===

-- God Mode
local function enableGodMode()
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    if humanoid then
        humanoid:GetPropertyChangedSignal("Health"):Connect(function()
            humanoid.Health = humanoid.MaxHealth
        end)
        humanoid.MaxHealth = math.huge
        humanoid.Health = math.huge
        print("God Mode Enabled")
    else
        warn("Humanoid not found")
    end
end

-- Infinite Mana
local function setInfiniteMana()
    local mana = character:FindFirstChild("Mana")
    if mana then
        mana.Changed:Connect(function()
            mana.Value = math.huge
        end)
        mana.Value = math.huge
        print("Infinite Mana Enabled")
    else
        warn("Mana object not found")
    end

    for _, skill in pairs(character:GetChildren()) do
        if skill:IsA("Tool") or skill:IsA("ModuleScript") then
            if skill:FindFirstChild("Cooldown") then
                skill.Cooldown.Value = 0
            end
        end
    end
end

-- Delete Nametags
local function deleteNametags()
    for _, otherPlayer in pairs(game.Players:GetPlayers()) do
        local nametag = otherPlayer:FindFirstChild("PlayerGui") and otherPlayer.PlayerGui:FindFirstChild("Nametag")
        if nametag then
            nametag:Destroy()
            print("Removed nametag for " .. otherPlayer.Name)
        end
    end
end

-- Auto Chest Finder
local function findAndOpenChests()
    while true do
        for _, chest in pairs(workspace:GetDescendants()) do
            if chest.Name == "Chest" then
                character.HumanoidRootPart.CFrame = chest.CFrame + Vector3.new(0, 3, 0)
                task.wait(0.5)
                if chest:FindFirstChild("ClickDetector") then
                    fireclickdetector(chest.ClickDetector)
                    print("Opened chest at " .. tostring(chest.Position))
                    task.wait(1)
                end
            end
        end
        task.wait(5)
    end
end

-- Auto Mirror Finder
local function findMirrors()
    while true do
        for _, mirror in pairs(workspace:GetDescendants()) do
            if mirror.Name == "Mirror" then
                character.HumanoidRootPart.CFrame = mirror.CFrame + Vector3.new(0, 3, 0)
                task.wait(0.5)
                if mirror:FindFirstChild("ClickDetector") then
                    fireclickdetector(mirror.ClickDetector)
                    print("Interacted with mirror at " .. tostring(mirror.Position))
                    task.wait(1)
                end
            end
        end
        task.wait(5)
    end
end

-- High Damage
local function setHighDamage()
    for _, tool in pairs(character:GetChildren()) do
        if tool:IsA("Tool") and tool:FindFirstChild("Handle") then
            local damageScript = tool:FindFirstChildOfClass("Script")
            if damageScript then
                local damageValue = damageScript:FindFirstChild("Damage")
                if damageValue then
                    damageValue.Value = 99999
                    print("Damage boosted for tool: " .. tool.Name)
                end
            end
        end
    end
end

-- === GUI Buttons ===
AutoSection:NewButton("Enable God Mode", "Prevents dying", enableGodMode)
AutoSection:NewButton("Set Infinite Mana", "Gives unlimited mana", setInfiniteMana)
AutoSection:NewButton("Delete Nametags", "Removes player nametags", deleteNametags)

AutoSection:NewButton("Start Auto Chests", "Finds and opens all chests", function()
    task.spawn(findAndOpenChests)
end)

AutoSection:NewButton("Start Auto Mirrors", "Finds and interacts with mirrors", function()
    task.spawn(findMirrors)
end)

AutoSection:NewButton("Set High Damage", "Boosts weapon/tool damage", setHighDamage)
